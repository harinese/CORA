<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AI Diabetes Risk Predictor</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #eef2f7, #f8fafc);
    color: #1f2937;
}

header {
    padding: 20px 40px;
    background: white;
    border-bottom: 1px solid #e5e7eb;
    font-weight: 700;
    font-size: 20px;
}

.container {
    display: flex;
    gap: 30px;
    padding: 40px;
    max-width: 1200px;
    margin: auto;
}

.card {
    background: white;
    border-radius: 14px;
    padding: 25px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.05);
}

.left { flex: 1; }
.right { width: 380px; }

h2, h3 { margin-top: 0; }

.grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

label {
    font-size: 13px;
    color: #6b7280;
}

input {
    width: 100%;
    padding: 9px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    margin-top: 4px;
    transition: 0.2s;
}

input:focus {
    outline: none;
    border-color: #2563eb;
}

button {
    padding: 10px 14px;
    border: none;
    border-radius: 8px;
    background: #2563eb;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: 0.2s;
}

button:hover {
    background: #1e40af;
}

.result {
    text-align: center;
}

.risk-circle {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    margin: 20px auto;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    font-weight: 700;
    color: white;
    transition: 0.4s;
}

.low { background: #16a34a; }
.medium { background: #f59e0b; }
.high { background: #dc2626; }

.prob {
    font-size: 18px;
    font-weight: 600;
}

.note {
    font-size: 12px;
    color: #6b7280;
    margin-top: 20px;
}

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

thead {
    background: #f3f4f6;
}

th, td {
    padding: 8px;
    text-align: left;
}

tbody tr {
    border-bottom: 1px solid #e5e7eb;
}

tbody tr:hover {
    background: #f9fafb;
}

.load-btn {
    font-size: 12px;
    padding: 5px 10px;
}
</style>
</head>

<body>

<header>
AI Model for Treatment Outcome Prediction
</header>

<div class="container">

<div class="card left">
<h2>Patient Information</h2>

<form id="predictForm">

<div class="grid">

<div>
<label>Pregnancies</label>
<input type="number" id="Pregnancies" placeholder="e.g. 2">
</div>

<div>
<label>Glucose (mg/dL)</label>
<input type="number" id="Glucose" required placeholder="e.g. 120">
</div>

<div>
<label>Blood Pressure</label>
<input type="number" id="BloodPressure" placeholder="e.g. 70">
</div>

<div>
<label>Skin Thickness</label>
<input type="number" id="SkinThickness" placeholder="optional">
</div>

<div>
<label>Insulin</label>
<input type="number" id="Insulin" placeholder="optional">
</div>

<div>
<label>BMI</label>
<input type="number" step="0.1" id="BMI" required placeholder="e.g. 28.4">
</div>

<div>
<label>Diabetes Pedigree Function</label>
<input type="number" step="0.01" id="DiabetesPedigreeFunction" required placeholder="e.g. 0.5">
</div>

<div>
<label>Age</label>
<input type="number" id="Age" required placeholder="e.g. 35">
</div>

</div>

<div style="margin-top:20px;">
<button type="submit" style="width:100%;">Analyze Risk</button>
</div>

</form>

<hr style="margin:30px 0;">

<h3>Example Patients</h3>
<p class="note">Synthetic anonymized cases for testing. Click "Load" to populate the form.</p>

<div style="overflow-x:auto;">
<table>
<thead>
<tr>
<th>ID</th>
<th>Age</th>
<th>Glucose</th>
<th>BMI</th>
<th>BP</th>
<th>DPF</th>
<th></th>
</tr>
</thead>
<tbody id="sampleTableBody"></tbody>
</table>
</div>

</div>

<div class="card right result">
<h2>Prediction Result</h2>

<div id="riskCircle" class="risk-circle low">--</div>

<div class="prob" id="probText">
Probability: --
</div>

<!--div class="note">
Educational demo only. Not for medical diagnosis.
</div-->

</div>

</div>

<script>
const form = document.getElementById("predictForm");
const circle = document.getElementById("riskCircle");
const probText = document.getElementById("probText");
const tableBody = document.getElementById("sampleTableBody");

const samples = [
{ id:"P-101", Pregnancies:0, Glucose:85,  BloodPressure:70, SkinThickness:20, Insulin:79,  BMI:22.5, DiabetesPedigreeFunction:0.2, Age:25 },
{ id:"P-102", Pregnancies:1, Glucose:95,  BloodPressure:72, SkinThickness:21, Insulin:85,  BMI:27.4, DiabetesPedigreeFunction:0.3, Age:30 },
{ id:"P-103", Pregnancies:2, Glucose:110, BloodPressure:75, SkinThickness:23, Insulin:90,  BMI:29.5, DiabetesPedigreeFunction:0.8, Age:35 },
{ id:"P-104", Pregnancies:3, Glucose:145, BloodPressure:78, SkinThickness:30, Insulin:130, BMI:31.0, DiabetesPedigreeFunction:0.5, Age:42 },
{ id:"P-105", Pregnancies:4, Glucose:165, BloodPressure:85, SkinThickness:35, Insulin:160, BMI:36.8, DiabetesPedigreeFunction:0.7, Age:50 },
{ id:"P-106", Pregnancies:5, Glucose:190, BloodPressure:90, SkinThickness:40, Insulin:200, BMI:41.2, DiabetesPedigreeFunction:1.2, Age:58 }
];

samples.forEach((p, i) => {
    const row = document.createElement("tr");
    row.innerHTML = `
        <td>${p.id}</td>
        <td>${p.Age}</td>
        <td>${p.Glucose}</td>
        <td>${p.BMI}</td>
        <td>${p.BloodPressure}</td>
        <td>${p.DiabetesPedigreeFunction}</td>
        <td><button class="load-btn" onclick="loadPatient(${i})">Load</button></td>
    `;
    tableBody.appendChild(row);
});

function loadPatient(i){
    const p = samples[i];
    for(const key in p){
        if(document.getElementById(key)){
            document.getElementById(key).value = p[key];
        }
    }
}

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const features = {
        Pregnancies: Number(Pregnancies.value || 0),
        Glucose: Number(Glucose.value),
        BloodPressure: Number(BloodPressure.value || 0),
        SkinThickness: Number(SkinThickness.value || 0),
        Insulin: Number(Insulin.value || 0),
        BMI: Number(BMI.value),
        DiabetesPedigreeFunction: Number(DiabetesPedigreeFunction.value),
        Age: Number(Age.value)
    };

    const res = await fetch("/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({features})
    });

    const data = await res.json();
    const prob = data.probability ? (data.probability * 100).toFixed(2) : 0;

    probText.innerText = "Probability: " + prob + "%";
    circle.classList.remove("low","medium","high");

    if(prob < 40){
        circle.classList.add("low");
        circle.innerText = "LOW";
    } else if(prob < 70){
        circle.classList.add("medium");
        circle.innerText = "MEDIUM";
    } else {
        circle.classList.add("high");
        circle.innerText = "HIGH";
    }
});
</script>

</body>
</html>